<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografic Avansat: Evoluția Clasei de Matematică-Informatică (2023-2025)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .infographic-header {
            background: linear-gradient(135deg, #1E3A8A 0%, #3B82F6 100%);
            color: white;
            padding: 2rem 1rem;
            border-radius: 0.75rem;
            text-align: center;
        }
        .section-title {
            display: flex;
            align-items: center;
            font-size: 1.75rem;
            font-weight: 700;
            color: #1E3A8A;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid #3B82F6;
            padding-bottom: 0.5rem;
        }
        .section-title i {
            margin-right: 0.75rem;
            color: #3B82F6;
        }
        .kpi-card {
            background-color: #F9FAFB;
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid #E5E7EB;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .kpi-value {
            font-size: 2.5rem;
            font-weight: 700;
        }
        .kpi-label {
            color: #6B7280;
            font-weight: 600;
        }
        .progress-bar-bg {
            background-color: #E5E7EB;
            border-radius: 1rem;
            padding: 0.25rem;
        }
        .progress-bar {
            height: 1.25rem;
            border-radius: 1rem;
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 0.5rem;
            transition: width 1s ease-in-out;
        }
        .student-card {
            background: white;
            border-radius: 0.75rem;
            padding: 1rem;
            border: 1px solid #E5E7EB;
            box-shadow: 0 1px 3px 0 rgba(0,0,0,0.1);
        }
        .student-table th {
            background-color: #EFF6FF;
            color: #1E40AF;
        }
        .student-table tr:nth-child(even) {
            background-color: #F9FAFB;
        }
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 0.75rem;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s;
        }
        .modal-overlay.visible .modal-content {
            transform: scale(1);
        }
        .spinner {
            border: 4px solid rgba(0,0,0,0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #3B82F6;
            animation: spin 1s ease infinite;
            margin: 2rem auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 p-4 sm:p-8">
    <div class="max-w-7xl mx-auto bg-white p-6 sm:p-10 rounded-xl shadow-2xl">

        <header class="infographic-header mb-12">
            <p class="text-lg sm:text-xl opacity-90 font-semibold">Liceul Teoretic ”Solomon Haliță”, Sângeorz-Băi</p>
            <h1 class="text-3xl sm:text-5xl font-bold my-2">Radiografia Clasei de Matematică-Informatică</h1>
            <p class="text-lg sm:text-xl opacity-90">Analiză Detaliată a Performanței Academice și a Frecvenței, Perioada 2023-2025</p>
        </header>

        <!-- Sectiunea 1: Imagine de Ansamblu -->
        <section class="mb-12">
            <h2 class="section-title"><i class="fas fa-chart-pie"></i>Imagine de Ansamblu</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <div class="kpi-card">
                    <p class="kpi-label">Medie Clasa a IX-a</p>
                    <p class="kpi-value text-blue-600">8.44</p>
                </div>
                <div class="kpi-card">
                    <p class="kpi-label">Medie Clasa a X-a</p>
                    <p class="kpi-value text-green-600">8.86</p>
                </div>
                <div class="kpi-card col-span-2 lg:col-span-1 border-l-4 border-green-500">
                    <p class="kpi-label">Progres Academic</p>
                    <p class="kpi-value text-green-600 flex items-center justify-center"><i class="fas fa-arrow-trend-up mr-2"></i>+0.42</p>
                </div>
                 <div class="kpi-card col-span-2 lg:col-span-1 border-l-4 border-red-500">
                    <p class="kpi-label">Creștere Absenteism</p>
                    <p class="kpi-value text-red-500 flex items-center justify-center"><i class="fas fa-triangle-exclamation mr-2"></i>+29.8%</p>
                </div>
            </div>
        </section>
        
        <!-- Sectiunea 2: Evolutia Individuala a Elevilor -->
        <section class="mb-12">
            <h2 class="section-title"><i class="fas fa-users"></i>Evoluția Individuală a Mediilor Generale</h2>
            <div class="overflow-x-auto rounded-lg border border-gray-200">
                <table class="w-full text-sm text-left text-gray-500 student-table">
                    <thead class="text-xs uppercase">
                        <tr>
                            <th scope="col" class="px-4 py-3">Nr.</th>
                            <th scope="col" class="px-4 py-3">Nume și Prenume</th>
                            <th scope="col" class="px-4 py-3 text-center">Media Cls. IX</th>
                            <th scope="col" class="px-4 py-3 text-center">Media Cls. X</th>
                            <th scope="col" class="px-4 py-3 text-center">Evoluție</th>
                            <th scope="col" class="px-4 py-3 text-center">Analiză AI</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be populated here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Restul codului ramane la fel -->
        <!-- Sectiunea 3: Evolutia pe Discipline -->
        <section class="mb-12">
            <h2 class="section-title"><i class="fas fa-book-open-reader"></i>Evoluția pe Discipline</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-x-12 gap-y-8">
                <!-- Coloana Stanga: Progres -->
                <div class="space-y-6">
                    <h3 class="text-xl font-semibold text-center text-green-700">Discipline în Progres Vizibil</h3>
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-semibold"><i class="fas fa-atom mr-2 text-green-500"></i>Fizică</span>
                            <span class="font-bold text-xl text-green-600">+2.04</span>
                        </div>
                        <div class="progress-bar-bg"><div class="progress-bar bg-green-500" style="width: 89.2%;">8.92</div></div>
                    </div>
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-semibold"><i class="fas fa-dna mr-2 text-blue-500"></i>Biologie</span>
                            <span class="font-bold text-xl text-blue-600">+1.01</span>
                        </div>
                        <div class="progress-bar-bg"><div class="progress-bar bg-blue-500" style="width: 78.5%;">7.85</div></div>
                    </div>
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-semibold"><i class="fas fa-language mr-2 text-indigo-500"></i>Limba Engleză</span>
                            <span class="font-bold text-xl text-indigo-600">+0.96</span>
                        </div>
                        <div class="progress-bar-bg"><div class="progress-bar bg-indigo-500" style="width: 90.4%;">9.04</div></div>
                    </div>
                </div>
                <!-- Coloana Dreapta: Provocari -->
                <div class="space-y-6">
                    <h3 class="text-xl font-semibold text-center text-red-700">Discipline cu Provocări</h3>
                     <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-semibold"><i class="fas fa-laptop-code mr-2 text-purple-500"></i>Informatică (Regres)</span>
                            <span class="font-bold text-xl text-red-600">-0.15</span>
                        </div>
                        <div class="progress-bar-bg"><div class="progress-bar bg-purple-500" style="width: 72.7%;">7.27</div></div>
                    </div>
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-semibold"><i class="fas fa-calculator mr-2 text-yellow-500"></i>Matematică (Stagnare)</span>
                            <span class="font-bold text-xl text-gray-500">+0.05</span>
                        </div>
                        <div class="progress-bar-bg"><div class="progress-bar bg-yellow-500" style="width: 66.9%;">6.69</div></div>
                    </div>
                     <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-semibold"><i class="fas fa-flask-vial mr-2 text-orange-500"></i>Chimie (Stagnare)</span>
                            <span class="font-bold text-xl text-gray-500">+0.03</span>
                        </div>
                        <div class="progress-bar-bg"><div class="progress-bar bg-orange-500 text-black" style="width: 61.1%;">6.11</div></div>
                    </div>
                    <div>
                        <div class="flex justify-between items-center mb-1">
                            <span class="font-semibold"><i class="fas fa-book mr-2 text-red-500"></i>Limba Română (Regres)</span>
                            <span class="font-bold text-xl text-red-600">-0.41</span>
                        </div>
                        <div class="progress-bar-bg"><div class="progress-bar bg-red-500" style="width: 83.5%;">8.35</div></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sectiunea 4: Performante Individuale -->
        <section class="mb-12">
            <h2 class="section-title"><i class="fas fa-user-graduate"></i>Performanțe Individuale Remarcabile</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="kpi-card">
                    <h3 class="text-xl font-bold text-amber-500 mb-4"><i class="fas fa-trophy"></i> Vârfuri de Performanță (Cls. X)</h3>
                    <div class="space-y-2 text-left">
                        <div class="student-card"><strong>Rebrișorean G. D-G.</strong><span class="float-right font-bold text-blue-600">10.00</span></div>
                        <div class="student-card"><strong>Szekely V.R. M.</strong><span class="float-right font-bold text-blue-600">9.95</span></div>
                        <div class="student-card"><strong>Hoza O.A. I-T.</strong><span class="float-right font-bold text-blue-600">9.94</span></div>
                    </div>
                </div>
                <div class="kpi-card">
                    <h3 class="text-xl font-bold text-green-500 mb-4"><i class="fas fa-rocket"></i> Cele Mai Mari Progrese</h3>
                    <div class="space-y-2 text-left">
                        <div class="student-card"><strong>Boca L. L-N.</strong><span class="float-right font-bold text-green-600">+1.13</span></div>
                        <div class="student-card"><strong>Neamțiu I. M-N.</strong><span class="float-right font-bold text-green-600">+0.78</span></div>
                        <div class="student-card"><strong>Tomi F. F-E.</strong><span class="float-right font-bold text-green-600">+0.74</span></div>
                    </div>
                </div>
                <div class="kpi-card bg-indigo-50 border-indigo-400 border-2">
                    <h3 class="text-xl font-bold text-indigo-600 mb-4"><i class="fas fa-star"></i> Povestea Anului</h3>
                    <p class="font-semibold text-lg">Hoza O.A. Ioana-Tabita</p>
                    <p class="text-gray-600">A transformat o vulnerabilitate într-un domeniu de excelență:</p>
                    <p class="text-3xl font-bold text-indigo-700 my-2">Fizică: 5.00 <i class="fas fa-long-arrow-right"></i> 10.00</p>
                    <p class="text-gray-500 text-sm">Un salt spectaculos ce demonstrează o capacitate de învățare și o ambiție extraordinare.</p>
                </div>
            </div>
        </section>

         <!-- Sectiunea 5: Absenteism Detaliat -->
        <section class="mb-12">
            <h2 class="section-title"><i class="fas fa-user-clock"></i>Analiza Absenteismului</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold text-center mb-4">Comparație Absențe: Clasa a IX-a vs. Clasa a X-a</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="kpi-card text-center">
                            <p class="kpi-label">Abs. Motivate IX</p><p class="kpi-value">665</p>
                        </div>
                        <div class="kpi-card text-center">
                            <p class="kpi-label">Abs. Motivate X</p><p class="kpi-value">822</p>
                        </div>
                        <div class="kpi-card text-center">
                            <p class="kpi-label">Abs. Nemotivate IX</p><p class="kpi-value text-red-500">134</p>
                        </div>
                        <div class="kpi-card text-center">
                            <p class="kpi-label">Abs. Nemotivate X</p><p class="kpi-value text-red-500">215</p>
                        </div>
                    </div>
                    <div class="mt-4 kpi-card bg-red-50 border-red-400">
                        <h4 class="font-bold text-red-700">Creștere alarmantă de +60.4% la absențele nemotivate!</h4>
                    </div>
                </div>
                <div>
                     <h3 class="text-xl font-semibold text-center mb-4">Observații Cheie privind Frecvența</h3>
                     <div class="space-y-4">
                        <div class="student-card bg-yellow-50">
                            <h4 class="font-bold text-yellow-800"><i class="fas fa-chart-line mr-2"></i>Corelația cu Performanța</h4>
                            <p class="text-sm text-gray-700 mt-1">În general, elevii cu un număr mare de absențe se confruntă cu stagnări sau regrese la învățătură. În contrast, elevii de top au o prezență constantă la ore.</p>
                        </div>
                        <div class="student-card bg-red-50">
                           <h4 class="font-bold text-red-800"><i class="fas fa-exclamation-circle mr-2"></i>Riscuri Identificate</h4>
                           <p class="text-sm text-gray-700 mt-1">Creșterea absenteismului poate indica o scădere a motivației și crește riscul de a acumula lacune la materiile de bază, ceea ce poate duce la situații de corigență.</p>
                        </div>
                     </div>
                </div>
            </div>
        </section>

        <!-- Sectiunea 6: Sinteza si Recomandari -->
        <section>
            <h2 class="section-title"><i class="fas fa-bullseye"></i>Sinteză și Recomandări Strategice</h2>
            <div class="bg-indigo-50 border-l-4 border-indigo-500 p-6 rounded-lg">
                <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4">
                    <h3 class="font-bold text-2xl mb-3 sm:mb-0 text-indigo-800">Caracterizare Finală</h3>
                    <div class="text-left sm:text-right">
                        <p class="font-semibold text-indigo-900">Profesor Diriginte,</p>
                        <p class="text-indigo-700">Frunză Paul-Adrian</p>
                    </div>
                </div>
                <p class="text-indigo-900 text-lg mb-6">
                    Clasa se conturează ca un colectiv ce deține un <span class="text-red-600 font-semibold">potențial academic ridicat</span>, însă este marcat de o <span class="text-red-600 font-semibold">eterogenitate pronunțată</span> a rezultatelor. Analiza datelor relevă existența unei structuri academice polarizate: pe de o parte, se distinge un nucleu de elevi cu performanțe de excelență, care stabilesc un standard înalt; pe de altă parte, un segment al clasei întâmpină dificultăți considerabile la disciplinele fundamentale ale profilului, precum Matematica și Chimia. Această discrepanță a nivelului de performanță reprezintă una dintre principalele provocări în gestionarea colectivului.
                    <br><br>
                    Cu toate acestea, la nivel de ansamblu, <span class="text-red-600 font-semibold">progresul academic general</span> este un aspect pozitiv incontestabil, confirmat de creșterea mediei generale a clasei. Un număr semnificativ de elevi au demonstrat o <span class="text-red-600 font-semibold">capacitate remarcabilă de a se autodepăși</span>, realizând salturi notabile de la un an la altul. Succesul vizibil la discipline ca Fizica și Biologia, unde metodele de predare interactive și aplicate au generat un interes sporit, sugerează că atitudinea față de învățătură este una constructivă atunci când elevii sunt angajați activ în procesul educațional.
                    <br><br>
                    În contrast cu evoluția academică pozitivă, <span class="text-red-600 font-semibold">creșterea absenteismului</span> constituie un factor de risc major. Acest fenomen nu trebuie privit doar ca o problemă administrativă, ci ca un simptom al unor posibile dificultăți de fond, precum scăderea motivației, dificultăți de adaptare sau o lipsă de angajament față de mediul școlar. Implicarea inegală a elevilor, vizibilă atât în rezultate, cât și în frecvență, impune o abordare strategică pentru a asigura coeziunea grupului și pentru a preveni acumularea de lacune în rândul elevilor vulnerabili.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                    <div class="p-4 bg-white rounded-lg shadow">
                        <i class="fas fa-users text-3xl text-blue-500 mb-2"></i>
                        <h4 class="font-bold">Tutorat între Colegi</h4>
                        <p class="text-sm text-gray-600">Implementarea unui sistem de sprijin la Matematică și Chimie, unde elevii de top îi ajută pe cei cu dificultăți.</p>
                    </div>
                    <div class="p-4 bg-white rounded-lg shadow">
                        <i class="fas fa-handshake-angle text-3xl text-red-500 mb-2"></i>
                        <h4 class="font-bold">Intervenție Absenteism</h4>
                        <p class="text-sm text-gray-600">Consiliere individuală și comunicare proactivă cu părinții elevilor cu frecvență scăzută.</p>
                    </div>
                    <div class="p-4 bg-white rounded-lg shadow">
                        <i class="fas fa-lightbulb text-3xl text-green-500 mb-2"></i>
                        <h4 class="font-bold">Învățare prin Proiecte</h4>
                        <p class="text-sm text-gray-600">Creșterea atractivității la Informatică și alte discipline prin aplicarea cunoștințelor în proiecte practice.</p>
                    </div>
                </div>
            </div>
        </section>

    </div>
    
    <!-- Modal for Gemini Analysis -->
    <div id="ai-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-2xl font-bold text-indigo-800">Analiză Personalizată ✨</h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            </div>
            <div id="modal-body">
                <!-- Spinner and content will be injected here -->
            </div>
        </div>
    </div>

    <script>
        const studentData = [
            { name: "Bindiu I. Lidia-Maria", media9: 8.65, media10: 9.00 },
            { name: "Boca L. Lorena-Natalia", media9: 7.50, media10: 8.63 },
            { name: "Bonchiș D. Raul-Gabriel", media9: 8.22, media10: 8.89 },
            { name: "Bulța I. Maxim", media9: 8.72, media10: 9.11 },
            { name: "Cobzaș V. Claudiu-Bogdan", media9: 8.39, media10: 9.16 },
            { name: "Cordoș A. Florina-Daniela", media9: 8.39, media10: 9.16 },
            { name: "Dărăban A. Tuțu-Beniamin", media9: 7.39, media10: 7.95 },
            { name: "Flămând A. Augustin-E-M", media9: 8.72, media10: 9.21 },
            { name: "Hîruța M. Rebeca", media9: 9.11, media10: 9.47 },
            { name: "Hoza O.A. Ioana-Tabita", media9: 9.28, media10: 9.94 },
            { name: "Lorințiu D. Marius-Avram", media9: 8.56, media10: 8.79 },
            { name: "Mihalache A.C. Darius-E.", media9: 8.00, media10: 7.89 },
            { name: "Mihali A. Emilia-Gabriela", media9: 8.89, media10: 9.53 },
            { name: "Miherța V. Paula Maria", media9: null, media10: 8.05 },
            { name: "Moroșan L. Leonora-Mihaela", media9: 8.72, media10: 9.16 },
            { name: "Neamțiu I. Maria-Nicoleta", media9: 8.06, media10: 8.84 },
            { name: "Nistor L. Ana-Maria", media9: 8.22, media10: 8.68 },
            { name: "Petrașcu I.E. Ana", media9: 9.17, media10: 9.63 },
            { name: "Pop O. Denisa-Ana-Delia", media9: 8.39, media10: 9.11 },
            { name: "Rebrișorean G. Daniel-G.", media9: 9.72, media10: 10.00 },
            { name: "Ruști M. Mario", media9: 7.78, media10: 8.26 },
            { name: "Szekely V.R. Mario", media9: 9.53, media10: 9.95 },
            { name: "Șanta D.D. Ioana-M-C.", media9: 8.18, media10: 8.56 },
            { name: "Tomi F. Florina-Emanuela", media9: 7.82, media10: 8.56 },
            { name: "Turic M.S. Alicia-Daria", media9: 8.33, media10: 8.53 },
            { name: "Ureche I. Ionela-Maria", media9: 7.67, media10: 8.37 },
        ];

        const tableBody = document.querySelector('.student-table tbody');
        studentData.forEach((student, index) => {
            const evolution = student.media9 ? (student.media10 - student.media9).toFixed(2) : null;
            let evolutionHtml;
            if (evolution > 0) {
                evolutionHtml = `<td class="px-4 py-4 text-center font-bold text-green-600"><i class="fas fa-arrow-up mr-1"></i>+${evolution}</td>`;
            } else if (evolution < 0) {
                evolutionHtml = `<td class="px-4 py-4 text-center font-bold text-red-600"><i class="fas fa-arrow-down mr-1"></i>${evolution}</td>`;
            } else if (student.media9 === null) {
                 evolutionHtml = `<td class="px-4 py-4 text-center font-bold text-blue-600">Elev nou</td>`;
            }
            else {
                evolutionHtml = `<td class="px-4 py-4 text-center font-bold text-gray-500">Stagnare</td>`;
            }

            const studentJson = JSON.stringify(student).replace(/"/g, '&quot;');

            const row = `
                <tr class="border-b ${evolution < 0 ? 'bg-red-50' : ''}">
                    <td class="px-4 py-4">${index + 1}</td>
                    <th scope="row" class="px-4 py-4 font-medium text-gray-900 whitespace-nowrap">${student.name}</th>
                    <td class="px-4 py-4 text-center">${student.media9 || '<span class="text-gray-400">N/A</span>'}</td>
                    <td class="px-4 py-4 text-center font-bold">${student.media10}</td>
                    ${evolutionHtml}
                    <td class="px-4 py-4 text-center">
                        <button onclick='generateAnalysis(${studentJson})' class="bg-indigo-500 text-white px-3 py-1 rounded-full text-xs font-semibold hover:bg-indigo-600 transition-colors">
                            ✨ Generează
                        </button>
                    </td>
                </tr>`;
            tableBody.innerHTML += row;
        });
        
        // Gemini API Interaction
        const modal = document.getElementById('ai-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');

        function showModal() {
            modal.classList.add('visible');
        }

        function closeModal() {
            modal.classList.remove('visible');
        }

        async function generateAnalysis(student) {
            showModal();
            modalTitle.innerText = `Analiză Personalizată ✨ pentru ${student.name}`;
            modalBody.innerHTML = '<div class="spinner"></div><p class="text-center text-gray-600">Se generează analiza... Vă rugăm așteptați.</p>';

            const prompt = `
                Ești un consilier școlar expert, cu un ton încurajator și constructiv. 
                Analizează următoarele date academice pentru elevul/eleva ${student.name}, de la un profil de matematică-informatică.
                - Media în clasa a IX-a: ${student.media9 || 'N/A (elev nou)'}
                - Media în clasa a X-a: ${student.media10}
                
                Pe baza acestor date, oferă o analiză detaliată și personalizată, structurată clar în următoarele secțiuni (folosește Markdown pentru formatare):

                ### 1. Observații Generale
                - Comentează evoluția generală (progres, regres, stagnare sau situația de elev nou).

                ### 2. Puncte Forte Evidente
                - Identifică și laudă aspectele pozitive care reies din date (ex: progres remarcabil, menținerea unui standard înalt).

                ### 3. Arii care Necesită Atenție
                - Identifică, într-un mod constructiv, zonele unde este loc de îmbunătățire (ex: un regres minor, o stagnare).

                ### 4. Recomandări Personalizate
                - Oferă 2-3 sfaturi concrete și personalizate pentru acest elev. Sugerează strategii de învățare sau arii pe care să se concentreze pentru a-și atinge potențialul maxim.

                Adoptă un limbaj formal, dar accesibil și încurajator.
            `;
            
            const apiKey = ""; // API key will be provided by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }]
                    })
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "Nu s-a putut genera un răspuns. Vă rugăm încercați mai târziu.";

                // Basic Markdown to HTML conversion
                let htmlContent = text
                    .replace(/### (.*)/g, '<h3 class="text-xl font-bold text-indigo-700 mt-4 mb-2">$1</h3>')
                    .replace(/\- (.*)/g, '<li class="ml-5 text-gray-700">$1</li>')
                    .replace(/<\/li>(\s*?)<li/g, '</li><li') // fix list spacing
                    .replace(/<li/g, '<ul><li')
                    .replace(/<\/li>\n/g, '</li></ul>')
                    .replace(/\n/g, '<br>');

                modalBody.innerHTML = htmlContent;

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                modalBody.innerHTML = `<p class="text-center text-red-600 font-semibold">A apărut o eroare la generarea analizei. Vă rugăm să reîncercați mai târziu.</p>`;
            }
        }
        
        window.onclick = function(event) {
            if (event.target == modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>

